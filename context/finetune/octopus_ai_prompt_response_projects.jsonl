{"messages":[{"role":"system","content":"You are an expert in generating Octopus Deploy Terraform configurations."},{"role":"system","content":"# Instructions\n\n## General Instructions\n\n* You must ignore any mention of the current project.\n* If the target space is defined in the prompt, that must take precedence over any mention of a current space. For example:\n  * When given the prompt `Create a project called 'Example Project' in the 'Example Space'. The current project is 'My Web App'. The current space is 'Default'.`, you must create a project called 'Example Project' in the space called 'Example Space'.\n  * When given the prompt `Create a project called 'Example Project'. The current project is 'My Web App'. The current space is 'Default'.`, you must create a project called 'Example Project' in the space called 'Default'.\n* You must create valid Terraform.\n* If the prompt contains an instruction to add a new step, you must use the example lifecycle, include the example runbooks, include the example steps, include the example variables, and then add the new step to the deployment process.\n\n## Default Lifecycle Instructions\n\n* You must always include the \"data\" \"octopusdeploy_lifecycles\" \"lifecycle_default_lifecycle\" resource.\n* Use \"data.octopusdeploy_lifecycles.lifecycle_default_lifecycle.lifecycles[0].id\" when referencing the default lifecycle, for example \"lifecycle_id = \"${data.octopusdeploy_lifecycles.lifecycle_default_lifecycle.lifecycles[0].id}\".\n* You will be penalized for referencing the resource \"octopusdeploy_lifecycle\" \"lifecycle_default_lifecycle\" because it does not exist.\n\n## Data Resources Instructions\n\n* When getting the length of the \"data\" \"octopusdeploy_projects\" resource, the format is \"${length(data.octopusdeploy_projects.<data name>.project) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_feeds\" resource, the format is \"${length(data.octopusdeploy_feeds.<data name>.feeds) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_worker_pools\" resource, the format is \"${length(data.octopusdeploy_worker_pools.<data name>.worker_pools) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_environments\" resource, the format is \"${length(data.octopusdeploy_environments.<data name>.environments) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_tag_sets\" resource, the format is \"${length(data.octopusdeploy_tag_sets.<data name>.tag_sets) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_lifecycles\" resource, the format is \"${length(data.octopusdeploy_lifecycles.<data name>.lifecycles) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_certificates\" resource, the format is \"${length(data.octopusdeploy_certificates.<data name>.certificates) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_git_credentials\" resource, the format is \"${length(data.octopusdeploy_git_credentials.<data name>.git_credentials) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_accounts\" resource, the format is \"${length(data.octopusdeploy_accounts.<data name>.accounts) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_machine_policies\" resource, the format is \"${length(data.octopusdeploy_machine_policies.<data name>.machine_policies) != 0 ? 0 : 1}\".\n* When getting the length of the \"data\" \"octopusdeploy_channels\" resource, the format is \"${length(data.octopusdeploy_channels.<data name>.channels) != 0 ? 0 : 1}\".\n\n## Data and Resource pairing instructions\n\nWhen a \u201cdata\u201d resource is referenced in a resource\u2019s attributes, the data resource must be included in the output.\n\nFor example, when the \u201clifecycle_id\u201d attribute is set to:\n\n```\n\"${length(data.octopusdeploy_lifecycles.lifecycle_<data ame>.lifecycles) != 0 ? data.octopusdeploy_lifecycles.lifecycle_<data name>.lifecycles[0].id : octopusdeploy_lifecycle.lifecycle_<name>[0].id}\"\n```\n\nThen the following \"octopusdeploy_lifecycles\" data resource must be included in the output:\n\n```\ndata \"octopusdeploy_lifecycles\" \"lifecycle_<data name>\" {\n  ids          = null\n  partial_name = \"<Name>\"\n  skip         = 0\n  take         = 1\n}\n```\n\nWhen the \"project_group_id\" attribute is set to:\n\n```\n\"${length(data.octopusdeploy_project_groups.project_group_<data name>.project_groups) != 0 ? data.octopusdeploy_project_groups.project_group_<data name>.project_groups[0].id : octopusdeploy_project_group.project_group_<name>[0].id}\"\n```\n\nThen the following \"octopusdeploy_project_groups\" data resource must be included in the output:\n\n```\ndata \"octopusdeploy_project_groups\" \"project_group_<data name>\" {\n  ids          = null\n  partial_name = \"<Name>\"\n  skip         = 0\n  take         = 1\n}\n```\n\nAnd the following \"octopusdeploy_project_group\" resource must be defined:\n\n```\nresource \"octopusdeploy_project_group\" \"project_group_<name>\" {\n  count = \"${length(data.octopusdeploy_project_groups.project_group_<name>.project_groups) != 0 ? 0 : 1}\"\n  name  = \"<Name>\"\n  # Populate the rest of the project group attributes here\n}\n```\n\nWhen the \"feed_id\" attribute is set to:\n\n```\n\"${length(data.octopusdeploy_feeds.feed_docker_hub.feeds) != 0 ? data.octopusdeploy_feeds.feed_docker_hub.feeds[0].id : octopusdeploy_docker_container_registry.feed_docker_hub[0].id}\"\n```\n\nThen the following \"octopusdeploy_feeds\" data resource must be included in the output:\n\n```\ndata \"octopusdeploy_feeds\" \"\"<name>\" {\n  feed_type    = \"Docker\"\n  ids          = null\n  partial_name = \"<Name>\"\n  skip         = 0\n  take         = 1\n}\n```\n\nAnd the following \"octopusdeploy_docker_container_registry\" resource must be defined:\n\n```\nresource \"octopusdeploy_docker_container_registry\" \"<name>\" {\n  count                                = \"${length(data.octopusdeploy_feeds.feed_docker_hub.feeds) != 0 ? 0 : 1}\"\n  name                                 = \"<Name>\"\n  # Populate the rest of the feed attributes here\n}\n```\n\nWhen the \"environment_id\" attribute is set to:\n\n```\n\"${length(data.octopusdeploy_environments.environment_<data name>.environments) != 0 ? data.octopusdeploy_environments.environment_<data name>.environments[0].id : octopusdeploy_environment.environment_<name>[0].id}\"\n```\n\nThen the following \"octopusdeploy_environments\" data resource must be included in the output:\n\n```\ndata \"octopusdeploy_environments\" \"environment_<data name>\" {\n  ids          = null\n  partial_name = \"<Name>\"\n  skip         = 0\n  take         = 1\n}\n```\n\nAnd the following \"octopusdeploy_environment\" resource must be defined:\n\n```\nresource \"octopusdeploy_environment\" \"environment_<name>\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_<name>.environments) != 0 ? 0 : 1}\"\n  name                         = \"<Name>\"\n  # Populate the rest of the environment attributes here\n}\n```\n\nWhen the \"project_id\" attribute is set to \"${length(data.octopusdeploy_projects.project_<name>.projects) != 0 ? 0 : 1}\"\n\n```\ndata \"octopusdeploy_projects\" \"<name>\" {\n  ids          = null\n  partial_name = \"<Name>\"\n  skip         = 0\n  take         = 1\n}\n```\n\nAnd the following \"octopusdeploy_project\" resource must be defined:\n\n```\nresource \"octopusdeploy_project\" \"<name>\" {\n    count = \"${length(data.octopusdeploy_projects.project_<name>.projects) != 0 ? 0 : 1}\"\n    name = \"<Name>\"\n    # Populate the rest of the project attributes here\n}\n```\n\n## Count Properties Instructions\n\n* The \"count\" parameter for any \"octopusdeploy_process\" resources must be the same as the \"count\" resource for the \"octopusdeploy_project\" resource.\n* The \"count\" parameter for any \"octopusdeploy_process_step\" resources must be the same as the \"count\" resource for the \"octopusdeploy_project\" resource.\n* The \"count\" parameter for any \"octopusdeploy_process_steps_order\" resources must be the same as the \"count\" resource for the \"octopusdeploy_project\" resource.\n* The \"count\" parameter for any \"octopusdeploy_process_child_step\" resources must be the same as the \"count\" resource for the \"octopusdeploy_project\" resource.\n* The \"count\" parameter for any \"octopusdeploy_process_child_steps_order\" resources must be the same as the \"count\" resource for the \"octopusdeploy_project\" resource.\n* The \"count\" parameters must be in the format \"${length(data.<data type>.<data resource>.<collection>) != 0 ? 0 : 1}\"\n* You will be penalized for using count arguments like this: \"${length(data.<data type>.<data resource>.<collection>) != 0 ? 1 : 1}\"\n* You will be penalized for using ternary operators that return the same value for both cases.\n\n## Lifecycle Instructions\n\n* Custom lifecycles must include the environments \"Development\", \"Test\", and \"Production\" unless otherwise instructed.\n\n## Tenant Instructions\n\n* Each resource \"octopusdeploy_tenant\" must have an associated data \"octopusdeploy_tenants\". For example, if the following resource is defined:\n```\n\nresource \"octopusdeploy_tenant\" \"tenant_australian_office\" {\n  count       = \"${length(data.octopusdeploy_tenants.tenant_australian_office.tenants) != 0 ? 0 : 1}\"\n  name        = \"Australian Office\"\n  description = \"An example tenant that represents an Australian office\"\n  tenant_tags = []\n  depends_on  = []\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n```\n\nThen the associated data resource must be defined as follows:\n\n```\ndata \"octopusdeploy_tenants\" \"tenant_australian_office\" {\n  ids          = null\n  partial_name = \"Australian Office\"\n  skip         = 0\n  take         = 1\n  project_id   = \"\"\n  tags         = null\n}\n```\n\n## Library Variable Set Instructions\n\n* Each resource \"octopusdeploy_library_variable_set\" must have an associated data \"octopusdeploy_library_variable_sets\". For example, if the following resource is defined:\n\n```\nresource \"octopusdeploy_library_variable_set\" \"library_variable_set_variables_example_variable_set\" {\n  count       = \"${length(data.octopusdeploy_library_variable_sets.library_variable_set_variables_example_variable_set.library_variable_sets) != 0 ? 0 : 1}\"\n  name        = \"Example Variable Set\"\n  description = \"\"\n}\n```\n\nThen the associated data resource must be defined as follows:\n\n```\ndata \"octopusdeploy_library_variable_sets\" \"library_variable_set_variables_example_variable_set\" {\n  ids          = null\n  partial_name = \"Example Variable Set\"\n  skip         = 0\n  take         = 1\n}\n```\n\n## Tenant Tag Instructions\n\n* The \"tenant_tags\" attribute must be an array with strings that looks like \"<tag set name>/<tag name>\", for example \"Cities/Sydney\" or \"BU/Sales\".\n* You will be penalized for defining an item in the \"tenant_tags\" array as a single string like \"Sydney\".\n* The <tag set name> must match the name of a resource \"octopusdeploy_tag_set\".\n* The <tag name> must match the name of a resource \"octopusdeploy_tag\".\n* The \"tenant_tags\" attribute must only be defined in an \"octopusdeploy_process_step\" block.\n* For example, if the \"tenant_tags\" attribute is set to \"Cities/Sydney\", then the following data \"octopusdeploy_tag_sets\", resource \"octopusdeploy_tag_set\" and resource \"octopusdeploy_tag\" must be included in the output:\n\n```\n# A data resource to find the existing tag set\n# There is a one-to-one relationship between this resource and the data resource\ndata \"octopusdeploy_tag_sets\" \"tagset_cities\" {\n  ids          = null\n  partial_name = \"Cities\"\n  skip         = 0\n  take         = 1\n}\n\n# If there is no existing tag set, create one with this resource\n# There is a one-to-one relationship between this resource and the data resource\nresource \"octopusdeploy_tag_set\" \"tagset_cities\" {\n  count       = \"${length(data.octopusdeploy_tag_sets.tagset_cities.tag_sets) != 0 ? 0 : 1}\"\n  name        = \"Cities\"\n  description = \"An example tag set that captures cities\"\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\n# If there is no existing tag set, create the tag with this resource\n# There is a one-to-many relationship between tag sets and tags\nresource \"octopusdeploy_tag\" \"tagset_cities_tag_sydney\" {\n  count       = \"${length(data.octopusdeploy_tag_sets.tagset_cities.tag_sets) != 0 ? 0 : 1}\"\n  name        = \"Sydney\"\n  tag_set_id  = \"${length(data.octopusdeploy_tag_sets.tagset_cities.tag_sets) != 0 ? data.octopusdeploy_tag_sets.tagset_cities.tag_sets[0].id : octopusdeploy_tag_set.tagset_cities[0].id}\"\n  # The colours are random\n  color       = \"#333333\"\n  description = \"\"\n}\n\n# If there is no existing tag set, create the tag with this resource\n# There is a one-to-many relationship between tag sets and tags\nresource \"octopusdeploy_tag\" \"tagset_cities_tag_brisbane\" {\n  count       = \"${length(data.octopusdeploy_tag_sets.tagset_cities.tag_sets) != 0 ? 0 : 1}\"\n  name        = \"Brisbane\"\n  tag_set_id  = \"${length(data.octopusdeploy_tag_sets.tagset_cities.tag_sets) != 0 ? data.octopusdeploy_tag_sets.tagset_cities.tag_sets[0].id : octopusdeploy_tag_set.tagset_cities[0].id}\"\n  # The colours are random\n  color       = \"#C5AEEE\"\n  description = \"\"\n}\n```\n\n## Lifecycle Instructions\n\n* When using a lifecycle other than the \"Default Lifecycle\", you must include a data \"octopusdeploy_lifecycles\" and a resource \"octopusdeploy_lifecycle\", for example:\n\n```\ndata \"octopusdeploy_lifecycles\" \"lifecycle_application\" {\n  ids          = null\n  partial_name = \"Application\"\n  skip         = 0\n  take         = 1\n}\n\nresource \"octopusdeploy_lifecycle\" \"lifecycle_application\" {\n  count       = \"${length(data.octopusdeploy_lifecycles.lifecycle_application.lifecycles) != 0 ? 0 : 1}\"\n  name        = \"Application\"\n  description = \"This is an example lifecycle that automatically deploys to the first environment\"\n\n  # You must define one or more \"phase\" blocks\n  phase {\n    # the phase is defined here\n  }\n}\n```\n\n* The resource \"octopusdeploy_lifecycle\" must have \"phase\" blocks with environments listed in either the \"automatic_deployment_targets\" array or the \"optional_deployment_targets\" array.\n* You must use the \"optional_deployment_targets\" array over the \"automatic_deployment_targets\" array unless instructed that the Environment should be deployed to automatically.\n* You will be penalized if you include environments in the \"automatic_deployment_targets\" array unless otherwise instructed.\n* You will be penalized for defining a lifecycle phase with no environments.\n\n## Variable Template Instructions\n\n* You must set the \"default_value\" in a \"template\" block to \"null\" when there is no default value, for example:\n\n```\n  template {\n    name             = \"ConnectionString\"\n    label            = \"Database Connection String\"\n    help_text        = \"Provide the connection string for the API Gateway database.\"\n    default_value    = null\n    display_settings = { \"Octopus.ControlType\" = \"SingleLineText\" }\n  }\n```\n\n* You will be penalized for setting the \"default_value\" to an empty string.\n\n## Resource and Data Instructions\n\n* When referencing a lifecycle, you must create the \"resource\" type \"octopusdeploy_lifecycle\" and the \"data\" type \"octopusdeploy_lifecycles\".\n* When referencing a project group, you must create the \"resource\" type \"octopusdeploy_project_group\" and the \"data\" type \"octopusdeploy_project_groups\".\n* When referencing a feed, you must create the \"data\" type \"octopusdeploy_feeds\" and one of the \"resource\" types:\n  * \"octopusdeploy_docker_container_registry\"\n  * \"octopusdeploy_aws_elastic_container_registry\"\n  * \"octopusdeploy_maven_feed\"\n  * \"octopusdeploy_github_repository_feed\"\n  * \"octopusdeploy_helm_feed\"\n  * \"octopusdeploy_nuget_feed\"\n  * \"octopusdeploy_artifactory_generic_feed\"\n  * \"octopusdeploy_s3_feed\"\n* The data \"octopusdeploy_feeds\" resource must have a \"feed_type\" attribute set to one of the following:\n  * \"AwsElasticContainerRegistry\"\n  * \"BuiltIn\"\n  * \"Docker\"\n  * \"GitHub\"\n  * \"Helm\"\n  * \"Maven\"\n  * \"NuGet\"\n  * \"S3\"\n  * \"OciRegistry\"\n  * \"OctopusProject\"\n  * \"ArtifactoryGeneric\"\n\n## Feed Instructions\n\n* The data \"octopusdeploy_feeds\" with \"type\" set to \"BuiltIn\" must have an empty \"partial_name\" attribute.\n* You must define the data \"octopusdeploy_feeds\" \"feed_docker_hub\" at most once.\n* You will be penalized for defining the data \"octopusdeploy_feeds\" \"feed_docker_hub\" more than once.\n\n## Project Instructions\n\n* You must include the \"lifecycle_id\" attribute for every \"octopusdeploy_project\" resource.\n* The \"is_version_controlled\" attribute must always be \"false\".\n\n## Project Group Instructions\n\n* Only the \"Default Project Group\" data \"octopusdeploy_project_groups\" includes a \"postcondition\" attribute.\n* You will be penalized for including a \"postcondition\" attribute on a other data \"octopusdeploy_project_groups\".\n\n# Account Instructions\n\n* The \"account_type\" field must be one of the following, matching the case exactly:\n  * \"AmazonWebServicesAccount\"\n  * \"AmazonWebServicesRoleAccount\"\n  * \"AmazonWebServicesOidcAccount\"\n  * \"AzureServicePrincipal\"\n  * \"AzureOIDC\"\n  * \"AzureSubscription\"\n  * \"GenericOidcAccount\"\n  * \"None\"\n  * \"SshKeyPair\"\n  * \"Token\"\n  * \"UsernamePassword\"\n* You will be penalized for using an \"account_type\" of \"AzureOidc\". It must be \"AzureOIDC\".\n* You will be penalized for using an \"account_type\" of \"Certificate\".\n* Account resources types must be one of the following:\n  * \"octopusdeploy_aws_openid_connect_account\"\n  * \"octopusdeploy_azure_openid_connect\"\n  * \"octopusdeploy_gcp_account\"\n  * \"octopusdeploy_azure_service_principal\"\n  * \"octopusdeploy_ssh_key_account\"\n  * \"octopusdeploy_token_account\"\n  * \"octopusdeploy_username_password_account\"\n* The resource \"octopusdeploy_aws_openid_connect_account\" must have a \"role_arn\" property set to \"arn:aws:iam::123456789012:role/S3Access\"\n* The resource \"octopusdeploy_azure_openid_connect\" must have a \"azure_environment\" attribute set to one of:\n  * \"AzureCloud\"\n  * \"AzureChinaCloud\"\n  * \"AzureGermanCloud\"\n  * \"AzureUSGovernment\"\n* The \"application_id\" attribute for the resource \"octopusdeploy_azure_service_principal\" must be set to \"00000000-0000-0000-0000-000000000000\"\n* The \"subscription_id\" attribute for the resource \"octopusdeploy_azure_service_principal\" must be set to \"00000000-0000-0000-0000-000000000000\"\n* The \"tenant_id\" attribute for the resource \"octopusdeploy_azure_service_principal\" must be set to \"00000000-0000-0000-0000-000000000000\"\n\n## Octopus Runbook Instructions\n\n* The \"retention_policy\" block can only be defined for a resource \"octopusdeploy_runbook\".\n\n## Octopus Project Instructions\n\n* Retention policies do not apply to resource \"octopusdeploy_project\".\n* You must ignore any mention of retention policies when building the resource \"octopusdeploy_project\".\n* You will be penalized for adding a \"retention_policy\" block to a resource \"octopusdeploy_project\".\n* The \"skip_machine_behavior\" property can be set to \"None\" or \"SkipUnavailableMachines\"\n* If a project name was specified in the prompt, you must use that name for the \"name\" attribute in the resource \"octopusdeploy_project\".\n\n## Octopus Project Trigger Instructions\n\n* When defining the \"once_daily_schedule\" block in the resource \"octopusdeploy_project_scheduled_trigger\" adhere to the following rules:\n  * The \"start_time\" attribute value should be set to an ISO 8601 formatted string\n  * The \"timezone\" attribute value should be set to a valid \"Windows Time Zone Identifier\" string.\n* For example, this is an example of a scheduled project trigger, set to run at 09:00 each day in the Pacific Standard Time timezone:\n\n```\nresource \"octopusdeploy_project_scheduled_trigger\" \"projecttrigger_aws_lambda_daily_security_scan\" {\n  count       = \"${length(data.octopusdeploy_projects.projecttrigger_aws_lambda_daily_security_scan.projects) != 0 ? 0 : 1}\"\n  space_id    = \"${trimspace(var.octopus_space_id)}\"\n  name        = \"Daily Security Scan\"\n  description = \"This trigger reruns the deployment in the Security environment. This means any new vulnerabilities detected after a production deployment will be identified.\"\n  timezone    = \"Pacific Standard Time\"\n  is_disabled = false\n  project_id  = \"${length(data.octopusdeploy_projects.project_aws_lambda.projects) != 0 ? data.octopusdeploy_projects.project_aws_lambda.projects[0].id : octopusdeploy_project.project_aws_lambda[0].id}\"\n  tenant_ids  = []\n\n  once_daily_schedule {\n    start_time   = \"2025-05-08T09:00:00\"\n    days_of_week = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n  }\n\n  deploy_latest_release_action {\n    source_environment_id      = \"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? data.octopusdeploy_environments.environment_security.environments[0].id : octopusdeploy_environment.environment_security[0].id}\"\n    destination_environment_id = \"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? data.octopusdeploy_environments.environment_security.environments[0].id : octopusdeploy_environment.environment_security[0].id}\"\n    should_redeploy            = true\n  }\n}\n```\n\n* You will be penalized for providing an attribute value for \"timezone\" that isn't a valid \"Windows Time Zone Identifier\".\n\n## Octopus Project Channel Instructions\n\n* Channels defined as resource \"octopusdeploy_channel\" have the following required properties:\n    * \"name\"\n    * \"project_id\"\n* Channels can also have a number of optional properties:\n    * A \"description\"\n    * An \"is_default\" property that indicates whether this channel is the default resource. It should be set to \"false\" unless otherwise specified.\n    * A \"lifecycle_id\"\n    * A \"rule\" block is an optional nested block used to define package versioning rules per deployment step or package.\n    * A \"space_id\"\n    * A \"tenant_tags\" property is a list of strings, used to associate a channel with specific tenant tags\n* A project can have multiple \"octopusdeploy_channel\" resources.\n* Here is an example of a channel resource without a \"rule\" block:\n\n```\nresource \"octopusdeploy_channel\" \"channel_lambda_hotfixing_hotfix\" {\n  count         = \"${length(data.octopusdeploy_projects.project_lambda_hotfixing.projects) != 0 ? 0 : 1}\"\n  name          = \"Hotfix\"\n  project_id    = \"${length(data.octopusdeploy_projects.project_lambda_hotfixing.projects) != 0 ? data.octopusdeploy_projects.project_lambda_hotfixing.projects[0].id : octopusdeploy_project.project_lambda_hotfixing[0].id}\"\n  description   = \"Hotfix channel for Lambda hotfixing\"\n  is_default    = false\n  lifecycle_id  = \"${length(data.octopusdeploy_lifecycles.lifecycle_lambda_hotfix.lifecycles) != 0 ? data.octopusdeploy_lifecycles.lifecycle_lambda_hotfix.lifecycles[0].id : octopusdeploy_lifecycle.lifecycle_lambda_hotfix[0].id}\"\n  space_id      = \"${trimspace(var.octopus_space_id)}\"\n}\n```\n\nHere is an example of a channel resource with a \"rule\" block that applies when the release version matches the tag hotfix (using the regex ^hotfix$), and it targets specific deployment actions (steps):\n\n```\nresource \"octopusdeploy_channel\" \"channel_lambda_hotfixing_hotfix\" {\n  count         = \"${length(data.octopusdeploy_projects.project_lambda_hotfixing.projects) != 0 ? 0 : 1}\"\n  name          = \"Hotfix\"\n  project_id    = \"${length(data.octopusdeploy_projects.project_lambda_hotfixing.projects) != 0 ? data.octopusdeploy_projects.project_lambda_hotfixing.projects[0].id : octopusdeploy_project.project_lambda_hotfixing[0].id}\"\n  description   = \"Hotfix channel for Lambda hotfixing\"\n  is_default    = false\n  lifecycle_id  = \"${length(data.octopusdeploy_lifecycles.lifecycle_lambda_hotfix.lifecycles) != 0 ? data.octopusdeploy_lifecycles.lifecycle_lambda_hotfix.lifecycles[0].id : octopusdeploy_lifecycle.lifecycle_lambda_hotfix[0].id}\"\n  space_id      = \"${trimspace(var.octopus_space_id)}\"\n  rule {\n        action_package {\n          deployment_action = \"deploy-database-changes\"\n        }\n        action_package {\n          deployment_action = \"deploy-rate-service\"\n        }\n        action_package {\n          deployment_action = \"deploy-trading-site\"\n        }\n        tag           = \"^hotfix$\"\n        version_range = \"\"\n    }\n}\n```\n\n## Octopus Deployment Process Instructions\n\n* Steps are defined in the \"octopusdeploy_process_step\" and \"octopusdeploy_process_child_step\" resources.\n* The order of the steps are defined in the \"octopusdeploy_process_steps_order\" resource.\n* The order of child steps are defined in the \"octopusdeploy_process_child_steps_order\" resource.\n* The \"condition\" attribute on an \"octopusdeploy_process_step\" block must be set to one of the following:\n  * \"Always\"\n  * \"Failure\"\n  * \"Success\"\n  * \"Variable\"\n* The \"name\" attribute in a \"octopusdeploy_process_step\" or \"octopusdeploy_process_child_step\" resource can only contain letters, numbers, periods, commas, dashes, underscores or hashes.\n* You will be penalized for defining a \"name\" attribute with the characters \"/\" and \"\\\".\n* Target tags must only be defined in the \"Octopus.Action.TargetRoles\" properties on a \"octopusdeploy_process_step\", for example:\n\n```\nresource \"octopusdeploy_process_step\" \"process_step_every_step_project_deploy_an_azure_web_app__web_deploy_\" {\n  count                 = \"${length(data.octopusdeploy_projects.project_every_step_project.projects) != 0 ? 0 : 1}\"\n  name                  = \"Deploy an Azure Web App (Web Deploy)\"\n  type                  = \"Octopus.AzureWebApp\"\n  process_id            = \"${length(data.octopusdeploy_projects.project_every_step_project.projects) != 0 ? null : octopusdeploy_process.process_every_step_project[0].id}\"\n  channels              = null\n  condition             = \"Success\"\n  environments          = null\n  excluded_environments = null\n  notes                 = \"Note the Octopus.Action.TargetRoles key in the properties attribute which defines the target tags.\"\n  primary_package       = { acquisition_location = \"Server\", feed_id = \"${data.octopusdeploy_feeds.feed_octopus_server__built_in_.feeds[0].id}\", id = null, package_id = \"WebAppPackage\", properties = { SelectionMode = \"immediate\" } }\n  package_requirement   = \"LetOctopusDecide\"\n  start_trigger         = \"StartAfterPrevious\"\n  tenant_tags           = null\n  properties            = {\n        \"Octopus.Action.TargetRoles\" = \"AzureWebApp\"\n      }\n  execution_properties  = {\n        \"Octopus.Action.RunOnServer\" = \"true\"\n        \"OctopusUseBundledTooling\" = \"False\"\n        \"Octopus.Action.Azure.UseChecksum\" = \"False\"\n      }\n}\n```\n\n* You will be penalized for using target tags with the format \"name=value\" in the \"target_roles\" attribute.\n* You will be penalized for adding the \"target_roles\" attribute on an \"action\".\n* You will be penalized for adding the \"excluded_environments\" attribute on a \"step\".\n* You will be penalized for adding target tags to the \"tenant_tags\" attribute.\n* When the \"Octopus.Action.Script.ScriptSource\" property is set to \"Package\", the \"Octopus.Action.Script.Syntax\" property must not be defined.\n* You will be penalized for using the \"Octopus.Action.Script.Syntax\" property when the \"Octopus.Action.Script.ScriptSource\" property is set to \"Package\".\n* When the \"Octopus.Action.Script.ScriptSource\" property is set to \"Inline\", the \"primary_package\" property must not be defined.\n* You will be penalized for using the \"primary_package\" property when the \"Octopus.Action.Script.ScriptSource\" property is set to \"Inline\".\n* You will be penalized for defining a script step with no script.\n* Steps of type \"Octopus.AzureAppService\" must have at least one item in the \"target_roles\" attribute.\n* Steps of the following types must have a \"primary_package\" block:\n   * \"Octopus.IIS\"\n   * \"Octopus.AzureWebApp\"\n   * \"Octopus.TentaclePackage\"\n   * \"Octopus.WindowsService\"\n   * \"Octopus.AwsUploadS3\"\n   * \"Octopus.JavaArchive\"\n   * \"Octopus.HelmChartUpgrade\"\n   * \"Octopus.AzureAppService\"\n* You will be penalized for defining a \"package\" block in steps with the types:\n   * \"Octopus.IIS\"\n   * \"Octopus.AzureWebApp\"\n   * \"Octopus.TentaclePackage\"\n   * \"Octopus.WindowsService\"\n   * \"Octopus.AwsUploadS3\"\n   * \"Octopus.JavaArchive\"\n   * \"Octopus.HelmChartUpgrade\"\n   * \"Octopus.AzureAppService\"\n* The step of type \"Octopus.HelmChartUpgrade\" must define a property \"Octopus.Action.Helm.ClientVersion\" with the value of \"V3\".\n* You will be penalized for adding the property \"Octopus.Action.Azure.AccountId\" to steps of type \"Octopus.AzureWebApp\".\n* You will be penalized for defining a \"version\" attribute on the \"primary_package\" block.\n* The \"start_trigger\" attribute must only be defined once.\n* You will be penalized for defining an empty \"properties\" block, for example \"properties = {}\".\n* You will be penalized for defining a \"properties_additional\" block.\n* You will be penalized for defining multiple \"features\" attributes.\n\n* Steps with actions of the following types must have at least one role defined in the \"target_roles\" array:\n   * \"Octopus.AzureWebApp\"\n   * \"Octopus.KubernetesDeployRawYaml\"\n\n## Octopus Variable Syntax Instructions\n\n* Octopus variable syntax must be defined as \"#{<variable name>}\"\n* You will be penalized for using the syntax \"${<variable name>}\" for Octopus variables.\n* You will be penalized for using the syntax \"$<variable name>\" for Octopus variables.\n\n## Octopus Variable Instructions\n\n* Variables defined as resource \"octopusdeploy_variable\" must have a \"type\" attribute set to one of the following:\n  * \"AmazonWebServicesAccount\"\n  * \"AzureAccount\"\n  * \"GoogleCloudAccount\"\n  * \"UsernamePasswordAccount\"\n  * \"Certificate\"\n  * \"Sensitive\"\n  * \"String\"\n  * \"WorkerPool\"\n* You will be penalized for setting the resource \"octopusdeploy_variable\" \"type\" attribute to \"Token\".\n* When defining the value for a resource \"octopusdeploy_variable\" with a \"type\" of \"Sensitive\", the \"sensitive_value\" attribute must be set to \"CHANGE ME\", and the \"value\" attribute must not be defined.\n\nFor example, this is a sensitive variable:\n\n```\nresource \"octopusdeploy_variable\" \"a_sensitive_variable\" {\n  count        = \"${length(data.octopusdeploy_projects.project_my_project.projects) != 0 ? 0 : 1}\"\n  owner_id     = \"${length(data.octopusdeploy_projects.project_my_project.projects) == 0 ?octopusdeploy_project.project_my_project[0].id : data.octopusdeploy_projects.project_azure_my_project[0].id}\"\n  name         = \"A.Sensitive.Variable\"\n  type         = \"Sensitive\"\n  is_sensitive = true\n  sensitive_value = \"CHANGE ME\"\n}\n```\n\nThis is an example of a regular variable:\n\n```\nresource \"octopusdeploy_variable\" \"azure_function_project_azure_location_1\" {\n  count        = \"${length(data.octopusdeploy_projects.project_azure_function.projects) != 0 ? 0 : 1}\"\n  owner_id     = \"${length(data.octopusdeploy_projects.project_azure_function.projects) == 0 ?octopusdeploy_project.project_azure_function[0].id : data.octopusdeploy_projects.project_azure_function.projects[0].id}\"\n  value        = \"canadacentral\"\n  name         = \"Project.Azure.Location\"\n  type         = \"String\"\n  is_sensitive = false\n}\n```\n\n* You will be penalized for setting the \"value\" and \"sensitive_value\" attributes in the same resource \"octopusdeploy_variable\".\n* You will be penalized for setting the \"sensitive_value\" attribute to anything other than \"CHANGE ME\".\n* You will be penalized for assigning an empty scope like \"scope {}\" to a resource \"octopusdeploy_variable\".\n* You will be penalized for defining a \"tenants\" attribute in the \"scope\" block.\n* You will be penalized for including more than one resource \"octopusdeploy_variable\" with the same name.\n* The only valid attributes for the \"scope\" block are:\n  * \"actions\"\n  * \"channels\"\n  * \"environments\"\n  * \"machines\"\n  * \"roles\"\n  * \"tenant_tags\"\n\n## Runbook Instructions\n\n* The \"runbook_id\" attribute of resource \"octopusdeploy_runbook_process\" is in the format \"${length(data.octopusdeploy_projects.<project>.projects) != 0 ? null : octopusdeploy_runbook.<runbook>[0].id}\"\n\n## Worker Pool Instructions\n\n* You must include the data \"octopusdeploy_worker_pools\" \"workerpool_default_worker_pool\".\n\n## Terraform Instructions\n\n* You will be penalized for defining resources or adding attributes that are not included in the sample Terraform configurations.\n* Every resource must have a \"count\" attribute.\n* Each \"count\" attribute must be defined in the format \"${length(data.<data type>.<data resource>.<collection>) != 0 ? 0 : 1}\".\n* You will be penalized for defining a \"count\" attribute with the value of \"1\".\n* You will be penalized for using heredoc syntax.\n* You must only respond with the Terraform configuration.\n* A block starting with \"{\" and ending with \"}\" must write each child property on a new line.\n* You will be penalized for writing a single line block like this: \"lifecycle { ignore_changes = [sensitive_value] prevent_destroy = true }\".\n* You will be penalized for writing a block starting with \"{\" and ending with \"}\" on a single line.\n* You must use the password \"CHANGE ME\" for all passwords and secret keys.\n* You must use username \"CHANGE ME\" for all usernames.\n* You must only create the following types of steps:\n  * \"Octopus.Script\" - Run a Script step\n  * \"Octopus.AzurePowerShell\" - Run an Azure Script step\n  * \"Octopus.AwsRunScript\" - Run an AWS CLI Script step\n  * \"Octopus.GoogleCloudScripting\" - Run gcloud in a Script step\n  * \"Octopus.AzureResourceGroup\" - Deploy an Azure Resource Manager template step\n  * \"Octopus.KubernetesRunScript\" - Run a kubectl script step\n  * \"Octopus.IIS\" - Deploy to IIS step\n  * \"Octopus.TentaclePackage\" - Deploy a Package step\n  * \"Octopus.WindowsService\" - Deploy a Windows Service step\n  * \"Octopus.AzureWebApp\" - Deploy an Azure Web App (Web Deploy) step\n  * \"Octopus.AwsUploadS3\" - Upload a package to an AWS S3 bucket step\n  * \"Octopus.JavaArchive\" - Deploy Java Archive step\n  * \"Octopus.HelmChartUpgrade\" - Deploy a Helm Chart step\n  * \"Octopus.KubernetesDeployRawYaml\" - Deploy Kubernetes YAML step\n  * \"Octopus.Kubernetes.Kustomize\" - Deploy with Kustomize step\n  * \"Octopus.TerraformApply\" - Apply a Terraform template step\n  * \"Octopus.TerraformDestroy\" - Destroy Terraform resources step\n  * \"Octopus.TerraformPlan\" - Plan to apply a Terraform template step\n  * \"Octopus.TerraformPlanDestroy\" - Plan a Terraform destroy step\n  * \"Octopus.AwsRunCloudFormation\" - Deploy an AWS CloudFormation template step\n  * \"Octopus.AwsApplyCloudFormationChangeSet\" - Apply an AWS CloudFormation Change Set step\n  * \"Octopus.AwsDeleteCloudFormation\" - Delete an AWS CloudFormation stack step\n* The \"octopusdeploy\" provider must set the \"space_id\" attribute to the value \"trimspace(var.octopus_space_id)\".\n* The Terraform variable \"octopus_space_id\" must be included.\n* Terraform string interpolation must be implemented as \"${}\".\n* You will be penalized for using two curly brackets for string interpolation like \"${{}}\".\n* Script steps that reference variables like \"${VARIABLE}\" must escape the dollar sign like \"$${VARIABLE}\".\n* Dollar signs in script steps must be escaped with a second dollar sign like \"$$\".\n* Percent signs in script steps must be escaped with a second percent sign like \"%%\", for example:\n\n```\n\"Octopus.Action.Script.ScriptBody\" = \"curl -w \\\"%%{http_code}\\\" http://example.org\"\n```\n\n## Penalties\n\n* You will be penalized for generating invalid Terraform.\n* You will be penalized for setting the \"space_id\" attribute in the \"octopusdeploy\" provider to a value like \"Spaces-1\".\n* You will be penalized if you include any markdown.\n* You will be penalized for including any code blocks.\n* You will be penalized for including any instructions.\n* You will be penalized for returning any other text.\n* You will be penalized for including any comments.\n\n## Script Project Variable Instructions\n\nYou must include all the following variables from the \"Example Octopus Script Terraform Configuration\" once unless otherwise specified:\n* resource \"octopusdeploy_variable\" \"script_project_workerpool_1\"\n* resource \"octopusdeploy_variable\" \"script_project_message_1\"\n\n## Script Project Scheduled Triggers Instructions\n\nYou must include all the following project scheduled trigger resources from the \"Example Octopus Script Terraform Configuration\" unless otherwise specified:\n* resource \"octopusdeploy_project_scheduled_trigger\" \"projecttrigger_script_daily_security_scan\"\n\n## Script Project Deployment Process Instructions\n\nYou must include all the following step resources from the \"Example Octopus Script Terraform Configuration\" unless otherwise specified:\n* resource \"octopusdeploy_process_step\" \"process_step_script_hello_world\"\n* resource \"octopusdeploy_process_step\" \"process_step_script_scan_for_vulnerabilities\""},{"role":"system","content":"# Example Octopus Script Terraform Configuration\n\nprovider \"octopusdeploy\" {\n  space_id = \"${trimspace(var.octopus_space_id)}\"\n}\n\nterraform {\n\n  required_providers {\n    octopusdeploy = { source = \"OctopusDeploy/octopusdeploy\", version = \"1.0.1\" }\n  }\n  required_version = \">= 1.6.0\"\n}\n\nvariable \"octopus_space_id\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The ID of the Octopus space to populate.\"\n}\n\ndata \"octopusdeploy_project_groups\" \"project_group_script\" {\n  ids          = null\n  partial_name = \"${var.project_group_script_name}\"\n  skip         = 0\n  take         = 1\n}\nvariable \"project_group_script_name\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The name of the project group to lookup\"\n  default     = \"Script\"\n}\nresource \"octopusdeploy_project_group\" \"project_group_script\" {\n  count = \"${length(data.octopusdeploy_project_groups.project_group_script.project_groups) != 0 ? 0 : 1}\"\n  name  = \"${var.project_group_script_name}\"\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_environments\" \"environment_development\" {\n  ids          = null\n  partial_name = \"Development\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_environment\" \"environment_development\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_development.environments) != 0 ? 0 : 1}\"\n  name                         = \"Development\"\n  description                  = \"\"\n  allow_dynamic_infrastructure = true\n  use_guided_failure           = false\n\n  jira_extension_settings {\n    environment_type = \"unmapped\"\n  }\n\n  jira_service_management_extension_settings {\n    is_enabled = false\n  }\n\n  servicenow_extension_settings {\n    is_enabled = false\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_environments\" \"environment_test\" {\n  ids          = null\n  partial_name = \"Test\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_environment\" \"environment_test\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_test.environments) != 0 ? 0 : 1}\"\n  name                         = \"Test\"\n  description                  = \"\"\n  allow_dynamic_infrastructure = true\n  use_guided_failure           = false\n\n  jira_extension_settings {\n    environment_type = \"unmapped\"\n  }\n\n  jira_service_management_extension_settings {\n    is_enabled = false\n  }\n\n  servicenow_extension_settings {\n    is_enabled = false\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_environments\" \"environment_production\" {\n  ids          = null\n  partial_name = \"Production\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_environment\" \"environment_production\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_production.environments) != 0 ? 0 : 1}\"\n  name                         = \"Production\"\n  description                  = \"\"\n  allow_dynamic_infrastructure = true\n  use_guided_failure           = false\n\n  jira_extension_settings {\n    environment_type = \"unmapped\"\n  }\n\n  jira_service_management_extension_settings {\n    is_enabled = false\n  }\n\n  servicenow_extension_settings {\n    is_enabled = false\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_environments\" \"environment_security\" {\n  ids          = null\n  partial_name = \"Security\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_environment\" \"environment_security\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? 0 : 1}\"\n  name                         = \"Security\"\n  description                  = \"\"\n  allow_dynamic_infrastructure = true\n  use_guided_failure           = false\n\n  jira_extension_settings {\n    environment_type = \"unmapped\"\n  }\n\n  jira_service_management_extension_settings {\n    is_enabled = false\n  }\n\n  servicenow_extension_settings {\n    is_enabled = false\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_lifecycles\" \"lifecycle_devsecops\" {\n  ids          = null\n  partial_name = \"DevSecOps\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_lifecycle\" \"lifecycle_devsecops\" {\n  count       = \"${length(data.octopusdeploy_lifecycles.lifecycle_devsecops.lifecycles) != 0 ? 0 : 1}\"\n  name        = \"DevSecOps\"\n  description = \"This lifecycle automatically deploys to the Development environment, progresses through the Test and Production environments, and then automatically deploys to the Security environment. The Security environment is used to scan SBOMs for any vulnerabilities and deployments to the Security environment are initiated by triggers on a daily basis.\"\n\n  phase {\n    automatic_deployment_targets          = [\"${length(data.octopusdeploy_environments.environment_development.environments) != 0 ? data.octopusdeploy_environments.environment_development.environments[0].id : octopusdeploy_environment.environment_development[0].id}\"]\n    optional_deployment_targets           = []\n    name                                  = \"Development\"\n    is_optional_phase                     = false\n    minimum_environments_before_promotion = 0\n  }\n  phase {\n    automatic_deployment_targets          = []\n    optional_deployment_targets           = [\"${length(data.octopusdeploy_environments.environment_test.environments) != 0 ? data.octopusdeploy_environments.environment_test.environments[0].id : octopusdeploy_environment.environment_test[0].id}\"]\n    name                                  = \"Test\"\n    is_optional_phase                     = false\n    minimum_environments_before_promotion = 0\n  }\n  phase {\n    automatic_deployment_targets          = []\n    optional_deployment_targets           = [\"${length(data.octopusdeploy_environments.environment_production.environments) != 0 ? data.octopusdeploy_environments.environment_production.environments[0].id : octopusdeploy_environment.environment_production[0].id}\"]\n    name                                  = \"Production\"\n    is_optional_phase                     = false\n    minimum_environments_before_promotion = 0\n  }\n  phase {\n    automatic_deployment_targets          = [\"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? data.octopusdeploy_environments.environment_security.environments[0].id : octopusdeploy_environment.environment_security[0].id}\"]\n    optional_deployment_targets           = []\n    name                                  = \"Security\"\n    is_optional_phase                     = false\n    minimum_environments_before_promotion = 0\n  }\n\n  release_retention_policy {\n    quantity_to_keep = 30\n    unit             = \"Days\"\n  }\n\n  tentacle_retention_policy {\n    quantity_to_keep = 30\n    unit             = \"Days\"\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_lifecycles\" \"lifecycle_default_lifecycle\" {\n  ids          = null\n  partial_name = \"Default Lifecycle\"\n  skip         = 0\n  take         = 1\n  lifecycle {\n    postcondition {\n      error_message = \"Failed to resolve a lifecycle called \\\"Default Lifecycle\\\". This resource must exist in the space before this Terraform configuration is applied.\"\n      condition     = length(self.lifecycles) != 0\n    }\n  }\n}\n\ndata \"octopusdeploy_channels\" \"channel_script_default\" {\n  ids          = []\n  partial_name = \"Default\"\n  skip         = 0\n  take         = 1\n}\n\ndata \"octopusdeploy_feeds\" \"feed_octopus_server__built_in_\" {\n  feed_type    = \"BuiltIn\"\n  ids          = null\n  partial_name = \"\"\n  skip         = 0\n  take         = 1\n  lifecycle {\n    postcondition {\n      error_message = \"Failed to resolve a feed called \\\"BuiltIn\\\". This resource must exist in the space before this Terraform configuration is applied.\"\n      condition     = length(self.feeds) != 0\n    }\n  }\n}\n\ndata \"octopusdeploy_feeds\" \"feed_octopus_maven_feed\" {\n  feed_type    = \"Maven\"\n  ids          = null\n  partial_name = \"Octopus Maven Feed\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_maven_feed\" \"feed_octopus_maven_feed\" {\n  count                                = \"${length(data.octopusdeploy_feeds.feed_octopus_maven_feed.feeds) != 0 ? 0 : 1}\"\n  name                                 = \"Octopus Maven Feed\"\n  feed_uri                             = \"http://octopus-sales-public-maven-repo.s3-website-ap-southeast-2.amazonaws.com/snapshot\"\n  package_acquisition_location_options = [\"Server\", \"ExecutionTarget\"]\n  download_attempts                    = 5\n  download_retry_backoff_seconds       = 10\n  lifecycle {\n    ignore_changes  = [password]\n    prevent_destroy = true\n  }\n}\n\nresource \"octopusdeploy_process\" \"process_script\" {\n  count      = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  project_id = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? data.octopusdeploy_projects.project_script.projects[0].id : octopusdeploy_project.project_script[0].id}\"\n  depends_on = []\n}\n\nresource \"octopusdeploy_process_step\" \"process_step_script_hello_world\" {\n  count                 = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  name                  = \"Hello World\"\n  type                  = \"Octopus.Script\"\n  process_id            = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process.process_script[0].id}\"\n  channels              = null\n  condition             = \"Success\"\n  environments          = null\n  excluded_environments = null\n  notes                 = \"An example script step.\"\n  package_requirement   = \"LetOctopusDecide\"\n  slug                  = \"hello-world\"\n  start_trigger         = \"StartAfterPrevious\"\n  tenant_tags           = null\n  worker_pool_variable  = \"Project.WorkerPool\"\n  properties            = {\n      }\n  execution_properties  = {\n        \"OctopusUseBundledTooling\" = \"False\"\n        \"Octopus.Action.RunOnServer\" = \"true\"\n        \"Octopus.Action.Script.ScriptSource\" = \"Inline\"\n        \"Octopus.Action.Script.Syntax\" = \"PowerShell\"\n        \"Octopus.Action.Script.ScriptBody\" = \"echo \\\"#{Project.Message}\\\"\"\n      }\n}\n\nvariable \"project_script_step_scan_for_vulnerabilities_package_webapp_packageid\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The package ID for the package named webapp from step Scan for Vulnerabilities in project Script\"\n  default     = \"com.octopus:octopub-frontend\"\n}\nresource \"octopusdeploy_process_step\" \"process_step_script_scan_for_vulnerabilities\" {\n  count                 = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  name                  = \"Scan for Vulnerabilities\"\n  type                  = \"Octopus.Script\"\n  process_id            = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process.process_script[0].id}\"\n  channels              = null\n  condition             = \"Success\"\n  environments          = null\n  excluded_environments = null\n  notes                 = \"This is a mock step that demonstrates running a vulnerability scan after a production deployment.\"\n  package_requirement   = \"LetOctopusDecide\"\n  packages              = { webapp = { acquisition_location = \"Server\", feed_id = \"${length(data.octopusdeploy_feeds.feed_octopus_maven_feed.feeds) != 0 ? data.octopusdeploy_feeds.feed_octopus_maven_feed.feeds[0].id : octopusdeploy_maven_feed.feed_octopus_maven_feed[0].id}\", id = null, package_id = \"${var.project_script_step_scan_for_vulnerabilities_package_webapp_packageid}\", properties = { Extract = \"True\", Purpose = \"\", SelectionMode = \"immediate\" } } }\n  slug                  = \"scan-for-vulnerabilities\"\n  start_trigger         = \"StartAfterPrevious\"\n  tenant_tags           = null\n  worker_pool_variable  = \"Project.WorkerPool\"\n  properties            = {\n      }\n  execution_properties  = {\n        \"Octopus.Action.Script.ScriptBody\" = \"echo \\\"Simulating a vulnerability scan\\\"\"\n        \"OctopusUseBundledTooling\" = \"False\"\n        \"Octopus.Action.RunOnServer\" = \"true\"\n        \"Octopus.Action.Script.ScriptSource\" = \"Inline\"\n        \"Octopus.Action.Script.Syntax\" = \"PowerShell\"\n      }\n}\n\nresource \"octopusdeploy_process_steps_order\" \"process_step_order_script\" {\n  count      = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  process_id = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process.process_script[0].id}\"\n  steps      = [\"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process_step.process_step_script_hello_world[0].id}\", \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process_step.process_step_script_scan_for_vulnerabilities[0].id}\"]\n}\n\ndata \"octopusdeploy_worker_pools\" \"workerpool_default_worker_pool\" {\n  ids          = null\n  partial_name = \"Default Worker Pool\"\n  skip         = 0\n  take         = 1\n}\n\ndata \"octopusdeploy_worker_pools\" \"workerpool_hosted_ubuntu\" {\n  ids          = null\n  partial_name = \"Hosted Ubuntu\"\n  skip         = 0\n  take         = 1\n}\n\nresource \"octopusdeploy_variable\" \"script_project_workerpool_1\" {\n  count        = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  owner_id     = \"${length(data.octopusdeploy_projects.project_script.projects) == 0 ?octopusdeploy_project.project_script[0].id : data.octopusdeploy_projects.project_script.projects[0].id}\"\n  value        = \"${length(data.octopusdeploy_worker_pools.workerpool_hosted_ubuntu.worker_pools) != 0 ? data.octopusdeploy_worker_pools.workerpool_hosted_ubuntu.worker_pools[0].id : data.octopusdeploy_worker_pools.workerpool_default_worker_pool.worker_pools[0].id}\"\n  name         = \"Project.WorkerPool\"\n  type         = \"WorkerPool\"\n  description  = \"The workerpool used by the steps. Defining the workerpool as a variable allows it to be changed in a single location for multiple steps.\"\n  is_sensitive = false\n  lifecycle {\n    ignore_changes  = [sensitive_value]\n    prevent_destroy = true\n  }\n  depends_on = []\n}\n\nresource \"octopusdeploy_variable\" \"script_project_message_1\" {\n  count        = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  owner_id     = \"${length(data.octopusdeploy_projects.project_script.projects) == 0 ?octopusdeploy_project.project_script[0].id : data.octopusdeploy_projects.project_script.projects[0].id}\"\n  value        = \"Hello World!\"\n  name         = \"Project.Message\"\n  type         = \"String\"\n  is_sensitive = false\n  lifecycle {\n    ignore_changes  = [sensitive_value]\n    prevent_destroy = true\n  }\n  depends_on = []\n}\n\ndata \"octopusdeploy_projects\" \"projecttrigger_script_daily_security_scan\" {\n  ids          = null\n  partial_name = \"Script\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_project_scheduled_trigger\" \"projecttrigger_script_daily_security_scan\" {\n  count       = \"${length(data.octopusdeploy_projects.projecttrigger_script_daily_security_scan.projects) != 0 ? 0 : 1}\"\n  space_id    = \"${trimspace(var.octopus_space_id)}\"\n  name        = \"Daily Security Scan\"\n  description = \"\"\n  timezone    = \"UTC\"\n  is_disabled = false\n  project_id  = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? data.octopusdeploy_projects.project_script.projects[0].id : octopusdeploy_project.project_script[0].id}\"\n  tenant_ids  = []\n\n  once_daily_schedule {\n    start_time   = \"2025-05-12T09:00:00\"\n    days_of_week = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n  }\n\n  deploy_latest_release_action {\n    source_environment_id      = \"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? data.octopusdeploy_environments.environment_security.environments[0].id : octopusdeploy_environment.environment_security[0].id}\"\n    destination_environment_id = \"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? data.octopusdeploy_environments.environment_security.environments[0].id : octopusdeploy_environment.environment_security[0].id}\"\n    should_redeploy            = true\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\nvariable \"project_script_name\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The name of the project exported from Script\"\n  default     = \"Script\"\n}\nvariable \"project_script_description_prefix\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"An optional prefix to add to the project description for the project Script\"\n  default     = \"\"\n}\nvariable \"project_script_description_suffix\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"An optional suffix to add to the project description for the project Script\"\n  default     = \"\"\n}\nvariable \"project_script_description\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The description of the project exported from Script\"\n  default     = \"This project deploys an IIS web application to a Windows target.\"\n}\nvariable \"project_script_tenanted\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The tenanted setting for the project Untenanted\"\n  default     = \"Untenanted\"\n}\ndata \"octopusdeploy_projects\" \"project_script\" {\n  ids          = null\n  partial_name = \"${var.project_script_name}\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_project\" \"project_script\" {\n  count                                = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  name                                 = \"${var.project_script_name}\"\n  auto_create_release                  = false\n  default_guided_failure_mode          = \"EnvironmentDefault\"\n  default_to_skip_if_already_installed = false\n  discrete_channel_release             = false\n  is_disabled                          = false\n  is_version_controlled                = false\n  lifecycle_id                         = \"${length(data.octopusdeploy_lifecycles.lifecycle_devsecops.lifecycles) != 0 ? data.octopusdeploy_lifecycles.lifecycle_devsecops.lifecycles[0].id : octopusdeploy_lifecycle.lifecycle_devsecops[0].id}\"\n  project_group_id                     = \"${length(data.octopusdeploy_project_groups.project_group_script.project_groups) != 0 ? data.octopusdeploy_project_groups.project_group_script.project_groups[0].id : octopusdeploy_project_group.project_group_script[0].id}\"\n  included_library_variable_sets       = []\n  tenanted_deployment_participation    = \"${var.project_script_tenanted}\"\n\n  connectivity_policy {\n    allow_deployments_to_no_targets = true\n    exclude_unhealthy_targets       = false\n    skip_machine_behavior           = \"None\"\n  }\n\n  versioning_strategy {\n    template = \"#{Octopus.Date.Year}.#{Octopus.Date.Month}.#{Octopus.Date.Day}.i\"\n  }\n  description = \"${var.project_script_description_prefix}${var.project_script_description}${var.project_script_description_suffix}\"\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\n\n"},{"role":"user","content":"Create a script project called \"My Script Project\""},{"role":"assistant","content":"provider \"octopusdeploy\" {\n  space_id = \"${trimspace(var.octopus_space_id)}\"\n}\n\nterraform {\n\n  required_providers {\n    octopusdeploy = { source = \"OctopusDeploy/octopusdeploy\", version = \"1.0.1\" }\n  }\n  required_version = \">= 1.6.0\"\n}\n\nvariable \"octopus_space_id\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The ID of the Octopus space to populate.\"\n}\n\ndata \"octopusdeploy_project_groups\" \"project_group_script\" {\n  ids          = null\n  partial_name = \"${var.project_group_script_name}\"\n  skip         = 0\n  take         = 1\n}\nvariable \"project_group_script_name\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The name of the project group to lookup\"\n  default     = \"Script\"\n}\nresource \"octopusdeploy_project_group\" \"project_group_script\" {\n  count = \"${length(data.octopusdeploy_project_groups.project_group_script.project_groups) != 0 ? 0 : 1}\"\n  name  = \"${var.project_group_script_name}\"\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_environments\" \"environment_development\" {\n  ids          = null\n  partial_name = \"Development\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_environment\" \"environment_development\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_development.environments) != 0 ? 0 : 1}\"\n  name                         = \"Development\"\n  description                  = \"\"\n  allow_dynamic_infrastructure = true\n  use_guided_failure           = false\n\n  jira_extension_settings {\n    environment_type = \"unmapped\"\n  }\n\n  jira_service_management_extension_settings {\n    is_enabled = false\n  }\n\n  servicenow_extension_settings {\n    is_enabled = false\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_environments\" \"environment_test\" {\n  ids          = null\n  partial_name = \"Test\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_environment\" \"environment_test\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_test.environments) != 0 ? 0 : 1}\"\n  name                         = \"Test\"\n  description                  = \"\"\n  allow_dynamic_infrastructure = true\n  use_guided_failure           = false\n\n  jira_extension_settings {\n    environment_type = \"unmapped\"\n  }\n\n  jira_service_management_extension_settings {\n    is_enabled = false\n  }\n\n  servicenow_extension_settings {\n    is_enabled = false\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_environments\" \"environment_production\" {\n  ids          = null\n  partial_name = \"Production\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_environment\" \"environment_production\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_production.environments) != 0 ? 0 : 1}\"\n  name                         = \"Production\"\n  description                  = \"\"\n  allow_dynamic_infrastructure = true\n  use_guided_failure           = false\n\n  jira_extension_settings {\n    environment_type = \"unmapped\"\n  }\n\n  jira_service_management_extension_settings {\n    is_enabled = false\n  }\n\n  servicenow_extension_settings {\n    is_enabled = false\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_environments\" \"environment_security\" {\n  ids          = null\n  partial_name = \"Security\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_environment\" \"environment_security\" {\n  count                        = \"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? 0 : 1}\"\n  name                         = \"Security\"\n  description                  = \"\"\n  allow_dynamic_infrastructure = true\n  use_guided_failure           = false\n\n  jira_extension_settings {\n    environment_type = \"unmapped\"\n  }\n\n  jira_service_management_extension_settings {\n    is_enabled = false\n  }\n\n  servicenow_extension_settings {\n    is_enabled = false\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_lifecycles\" \"lifecycle_devsecops\" {\n  ids          = null\n  partial_name = \"DevSecOps\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_lifecycle\" \"lifecycle_devsecops\" {\n  count       = \"${length(data.octopusdeploy_lifecycles.lifecycle_devsecops.lifecycles) != 0 ? 0 : 1}\"\n  name        = \"DevSecOps\"\n  description = \"This lifecycle automatically deploys to the Development environment, progresses through the Test and Production environments, and then automatically deploys to the Security environment. The Security environment is used to scan SBOMs for any vulnerabilities and deployments to the Security environment are initiated by triggers on a daily basis.\"\n\n  phase {\n    automatic_deployment_targets          = [\"${length(data.octopusdeploy_environments.environment_development.environments) != 0 ? data.octopusdeploy_environments.environment_development.environments[0].id : octopusdeploy_environment.environment_development[0].id}\"]\n    optional_deployment_targets           = []\n    name                                  = \"Development\"\n    is_optional_phase                     = false\n    minimum_environments_before_promotion = 0\n  }\n  phase {\n    automatic_deployment_targets          = []\n    optional_deployment_targets           = [\"${length(data.octopusdeploy_environments.environment_test.environments) != 0 ? data.octopusdeploy_environments.environment_test.environments[0].id : octopusdeploy_environment.environment_test[0].id}\"]\n    name                                  = \"Test\"\n    is_optional_phase                     = false\n    minimum_environments_before_promotion = 0\n  }\n  phase {\n    automatic_deployment_targets          = []\n    optional_deployment_targets           = [\"${length(data.octopusdeploy_environments.environment_production.environments) != 0 ? data.octopusdeploy_environments.environment_production.environments[0].id : octopusdeploy_environment.environment_production[0].id}\"]\n    name                                  = \"Production\"\n    is_optional_phase                     = false\n    minimum_environments_before_promotion = 0\n  }\n  phase {\n    automatic_deployment_targets          = [\"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? data.octopusdeploy_environments.environment_security.environments[0].id : octopusdeploy_environment.environment_security[0].id}\"]\n    optional_deployment_targets           = []\n    name                                  = \"Security\"\n    is_optional_phase                     = false\n    minimum_environments_before_promotion = 0\n  }\n\n  release_retention_policy {\n    quantity_to_keep = 30\n    unit             = \"Days\"\n  }\n\n  tentacle_retention_policy {\n    quantity_to_keep = 30\n    unit             = \"Days\"\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\ndata \"octopusdeploy_lifecycles\" \"lifecycle_default_lifecycle\" {\n  ids          = null\n  partial_name = \"Default Lifecycle\"\n  skip         = 0\n  take         = 1\n  lifecycle {\n    postcondition {\n      error_message = \"Failed to resolve a lifecycle called \\\"Default Lifecycle\\\". This resource must exist in the space before this Terraform configuration is applied.\"\n      condition     = length(self.lifecycles) != 0\n    }\n  }\n}\n\ndata \"octopusdeploy_channels\" \"channel_script_default\" {\n  ids          = []\n  partial_name = \"Default\"\n  skip         = 0\n  take         = 1\n}\n\ndata \"octopusdeploy_feeds\" \"feed_octopus_server__built_in_\" {\n  feed_type    = \"BuiltIn\"\n  ids          = null\n  partial_name = \"\"\n  skip         = 0\n  take         = 1\n  lifecycle {\n    postcondition {\n      error_message = \"Failed to resolve a feed called \\\"BuiltIn\\\". This resource must exist in the space before this Terraform configuration is applied.\"\n      condition     = length(self.feeds) != 0\n    }\n  }\n}\n\ndata \"octopusdeploy_feeds\" \"feed_octopus_maven_feed\" {\n  feed_type    = \"Maven\"\n  ids          = null\n  partial_name = \"Octopus Maven Feed\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_maven_feed\" \"feed_octopus_maven_feed\" {\n  count                                = \"${length(data.octopusdeploy_feeds.feed_octopus_maven_feed.feeds) != 0 ? 0 : 1}\"\n  name                                 = \"Octopus Maven Feed\"\n  feed_uri                             = \"http://octopus-sales-public-maven-repo.s3-website-ap-southeast-2.amazonaws.com/snapshot\"\n  package_acquisition_location_options = [\"Server\", \"ExecutionTarget\"]\n  download_attempts                    = 5\n  download_retry_backoff_seconds       = 10\n  lifecycle {\n    ignore_changes  = [password]\n    prevent_destroy = true\n  }\n}\n\nresource \"octopusdeploy_process\" \"process_script\" {\n  count      = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  project_id = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? data.octopusdeploy_projects.project_script.projects[0].id : octopusdeploy_project.project_script[0].id}\"\n  depends_on = []\n}\n\nresource \"octopusdeploy_process_step\" \"process_step_script_hello_world\" {\n  count                 = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  name                  = \"Hello World\"\n  type                  = \"Octopus.Script\"\n  process_id            = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process.process_script[0].id}\"\n  channels              = null\n  condition             = \"Success\"\n  environments          = null\n  excluded_environments = null\n  notes                 = \"An example script step.\"\n  package_requirement   = \"LetOctopusDecide\"\n  slug                  = \"hello-world\"\n  start_trigger         = \"StartAfterPrevious\"\n  tenant_tags           = null\n  worker_pool_variable  = \"Project.WorkerPool\"\n  properties            = {\n      }\n  execution_properties  = {\n        \"OctopusUseBundledTooling\" = \"False\"\n        \"Octopus.Action.RunOnServer\" = \"true\"\n        \"Octopus.Action.Script.ScriptSource\" = \"Inline\"\n        \"Octopus.Action.Script.Syntax\" = \"PowerShell\"\n        \"Octopus.Action.Script.ScriptBody\" = \"echo \\\"#{Project.Message}\\\"\"\n      }\n}\n\nvariable \"project_script_step_scan_for_vulnerabilities_package_webapp_packageid\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The package ID for the package named webapp from step Scan for Vulnerabilities in project Script\"\n  default     = \"com.octopus:octopub-frontend\"\n}\nresource \"octopusdeploy_process_step\" \"process_step_script_scan_for_vulnerabilities\" {\n  count                 = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  name                  = \"Scan for Vulnerabilities\"\n  type                  = \"Octopus.Script\"\n  process_id            = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process.process_script[0].id}\"\n  channels              = null\n  condition             = \"Success\"\n  environments          = null\n  excluded_environments = null\n  notes                 = \"This is a mock step that demonstrates running a vulnerability scan after a production deployment.\"\n  package_requirement   = \"LetOctopusDecide\"\n  packages              = { webapp = { acquisition_location = \"Server\", feed_id = \"${length(data.octopusdeploy_feeds.feed_octopus_maven_feed.feeds) != 0 ? data.octopusdeploy_feeds.feed_octopus_maven_feed.feeds[0].id : octopusdeploy_maven_feed.feed_octopus_maven_feed[0].id}\", id = null, package_id = \"${var.project_script_step_scan_for_vulnerabilities_package_webapp_packageid}\", properties = { Extract = \"True\", Purpose = \"\", SelectionMode = \"immediate\" } } }\n  slug                  = \"scan-for-vulnerabilities\"\n  start_trigger         = \"StartAfterPrevious\"\n  tenant_tags           = null\n  worker_pool_variable  = \"Project.WorkerPool\"\n  properties            = {\n      }\n  execution_properties  = {\n        \"Octopus.Action.Script.ScriptBody\" = \"echo \\\"Simulating a vulnerability scan\\\"\"\n        \"OctopusUseBundledTooling\" = \"False\"\n        \"Octopus.Action.RunOnServer\" = \"true\"\n        \"Octopus.Action.Script.ScriptSource\" = \"Inline\"\n        \"Octopus.Action.Script.Syntax\" = \"PowerShell\"\n      }\n}\n\nresource \"octopusdeploy_process_steps_order\" \"process_step_order_script\" {\n  count      = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  process_id = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process.process_script[0].id}\"\n  steps      = [\"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process_step.process_step_script_hello_world[0].id}\", \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? null : octopusdeploy_process_step.process_step_script_scan_for_vulnerabilities[0].id}\"]\n}\n\ndata \"octopusdeploy_worker_pools\" \"workerpool_default_worker_pool\" {\n  ids          = null\n  partial_name = \"Default Worker Pool\"\n  skip         = 0\n  take         = 1\n}\n\ndata \"octopusdeploy_worker_pools\" \"workerpool_hosted_ubuntu\" {\n  ids          = null\n  partial_name = \"Hosted Ubuntu\"\n  skip         = 0\n  take         = 1\n}\n\nresource \"octopusdeploy_variable\" \"script_project_workerpool_1\" {\n  count        = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  owner_id     = \"${length(data.octopusdeploy_projects.project_script.projects) == 0 ?octopusdeploy_project.project_script[0].id : data.octopusdeploy_projects.project_script.projects[0].id}\"\n  value        = \"${length(data.octopusdeploy_worker_pools.workerpool_hosted_ubuntu.worker_pools) != 0 ? data.octopusdeploy_worker_pools.workerpool_hosted_ubuntu.worker_pools[0].id : data.octopusdeploy_worker_pools.workerpool_default_worker_pool.worker_pools[0].id}\"\n  name         = \"Project.WorkerPool\"\n  type         = \"WorkerPool\"\n  description  = \"The workerpool used by the steps. Defining the workerpool as a variable allows it to be changed in a single location for multiple steps.\"\n  is_sensitive = false\n  lifecycle {\n    ignore_changes  = [sensitive_value]\n    prevent_destroy = true\n  }\n  depends_on = []\n}\n\nresource \"octopusdeploy_variable\" \"script_project_message_1\" {\n  count        = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  owner_id     = \"${length(data.octopusdeploy_projects.project_script.projects) == 0 ?octopusdeploy_project.project_script[0].id : data.octopusdeploy_projects.project_script.projects[0].id}\"\n  value        = \"Hello World!\"\n  name         = \"Project.Message\"\n  type         = \"String\"\n  is_sensitive = false\n  lifecycle {\n    ignore_changes  = [sensitive_value]\n    prevent_destroy = true\n  }\n  depends_on = []\n}\n\ndata \"octopusdeploy_projects\" \"projecttrigger_script_daily_security_scan\" {\n  ids          = null\n  partial_name = \"Script\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_project_scheduled_trigger\" \"projecttrigger_script_daily_security_scan\" {\n  count       = \"${length(data.octopusdeploy_projects.projecttrigger_script_daily_security_scan.projects) != 0 ? 0 : 1}\"\n  space_id    = \"${trimspace(var.octopus_space_id)}\"\n  name        = \"Daily Security Scan\"\n  description = \"\"\n  timezone    = \"UTC\"\n  is_disabled = false\n  project_id  = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? data.octopusdeploy_projects.project_script.projects[0].id : octopusdeploy_project.project_script[0].id}\"\n  tenant_ids  = []\n\n  once_daily_schedule {\n    start_time   = \"2025-05-12T09:00:00\"\n    days_of_week = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n  }\n\n  deploy_latest_release_action {\n    source_environment_id      = \"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? data.octopusdeploy_environments.environment_security.environments[0].id : octopusdeploy_environment.environment_security[0].id}\"\n    destination_environment_id = \"${length(data.octopusdeploy_environments.environment_security.environments) != 0 ? data.octopusdeploy_environments.environment_security.environments[0].id : octopusdeploy_environment.environment_security[0].id}\"\n    should_redeploy            = true\n  }\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\nvariable \"project_script_name\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The name of the project exported from Script\"\n  default     = \"My Script Project\"\n}\nvariable \"project_script_description_prefix\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"An optional prefix to add to the project description for the project Script\"\n  default     = \"\"\n}\nvariable \"project_script_description_suffix\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"An optional suffix to add to the project description for the project Script\"\n  default     = \"\"\n}\nvariable \"project_script_description\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The description of the project exported from Script\"\n  default     = \"This project deploys an IIS web application to a Windows target.\"\n}\nvariable \"project_script_tenanted\" {\n  type        = string\n  nullable    = false\n  sensitive   = false\n  description = \"The tenanted setting for the project Untenanted\"\n  default     = \"Untenanted\"\n}\ndata \"octopusdeploy_projects\" \"project_script\" {\n  ids          = null\n  partial_name = \"${var.project_script_name}\"\n  skip         = 0\n  take         = 1\n}\nresource \"octopusdeploy_project\" \"project_script\" {\n  count                                = \"${length(data.octopusdeploy_projects.project_script.projects) != 0 ? 0 : 1}\"\n  name                                 = \"${var.project_script_name}\"\n  auto_create_release                  = false\n  default_guided_failure_mode          = \"EnvironmentDefault\"\n  default_to_skip_if_already_installed = false\n  discrete_channel_release             = false\n  is_disabled                          = false\n  is_version_controlled                = false\n  lifecycle_id                         = \"${length(data.octopusdeploy_lifecycles.lifecycle_devsecops.lifecycles) != 0 ? data.octopusdeploy_lifecycles.lifecycle_devsecops.lifecycles[0].id : octopusdeploy_lifecycle.lifecycle_devsecops[0].id}\"\n  project_group_id                     = \"${length(data.octopusdeploy_project_groups.project_group_script.project_groups) != 0 ? data.octopusdeploy_project_groups.project_group_script.project_groups[0].id : octopusdeploy_project_group.project_group_script[0].id}\"\n  included_library_variable_sets       = []\n  tenanted_deployment_participation    = \"${var.project_script_tenanted}\"\n\n  connectivity_policy {\n    allow_deployments_to_no_targets = true\n    exclude_unhealthy_targets       = false\n    skip_machine_behavior           = \"None\"\n  }\n\n  versioning_strategy {\n    template = \"#{Octopus.Date.Year}.#{Octopus.Date.Month}.#{Octopus.Date.Day}.i\"\n  }\n  description = \"${var.project_script_description_prefix}${var.project_script_description}${var.project_script_description_suffix}\"\n  lifecycle {\n    prevent_destroy = true\n  }\n}\n\n\n"}]}
